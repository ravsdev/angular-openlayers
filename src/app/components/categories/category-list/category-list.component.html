<p-toast />
<p-confirmDialog key="deleteConfirm" />

@if (categories.length === 0) {
<div class="flex align-center justify-content-center">No hay categorías</div>
}@else{
<p-table [value]="categories">
  <ng-template pTemplate="header">
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-category>
    <tr>
      <td>{{ category.id }}</td>
      <td>{{ category.name }}</td>
      <td>
        <div class="flex gap-2">
          <p-button
            (onClick)="showDialog(category)"
            icon="pi pi-file-edit"
            [outlined]="true"
            severity="info"
          />
          <p-button
            (onClick)="confirmDelete(category)"
            icon="pi pi-times"
            severity="danger"
            [outlined]="true"
          />
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>
}

<p-dialog
  header="Editar categoría"
  [modal]="true"
  [(visible)]="categoryNameDialogVisible"
  [style]="{ width: '25rem' }"
>
  <div class="flex align-items-center gap-3 mb-3">
    <form (ngSubmit)="confirmModify()" class="w-full">
      <label for="category" class="font-semibold w-6rem">Categoría</label>
      <div class="flex gap-2 mt-3">
        <input
          pInputText
          id="category"
          class="flex-auto"
          [(ngModel)]="name"
          [ngModelOptions]="{ standalone: true }"
          autocomplete="off"
        />
        <p-button
          (onClick)="confirmModify()"
          icon="pi pi-file-edit"
          [outlined]="true"
          severity="info"
        />
      </div>
    </form>
  </div>
</p-dialog>
